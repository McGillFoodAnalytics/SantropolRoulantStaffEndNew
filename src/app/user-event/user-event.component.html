<ng-template #content let-modal>
  <div class="modal-header text-center">
    <h4 class="modal-title w-100" id="modal-basic-title">
      Volunteer's Past and Upcoming Events
    </h4>
    <button
      type="button"
      class="close"
      aria-label="Close"
      (click)="modal.dismiss()"
    >
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <!-- 2 tabs avec chacune un mat table des events (soit past soit current) -->
    <mat-tab-group>
      <mat-tab label="Past Events">
        <h2 id="no_event" *ngIf="pastEventsUser.length == 0">
          This volunteer doesn't have any past events!
        </h2>

        <table class="table" *ngIf="pastEventsUser.length != 0">
          <thead class="thead-dark">
            <tr>
              <th scope="col">Date</th>
              <th scope="col">Type</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let event of pastEventsUser">
              <td>{{ event.event_date_txt }}</td>
              <td>{{ event.event_type }}</td>
            </tr>
          </tbody>
        </table>
      </mat-tab>

      <mat-tab label="Current Events">
        <h2 id="no_event" *ngIf="currentEventsUser.length == 0">
          This volunteer doesn't have any coming events!
        </h2>

        <table class="table" *ngIf="currentEventsUser.length != 0">
          <thead class="thead-dark">
            <tr>
              <th scope="col">Date</th>
              <th scope="col">Type</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let event of currentEventsUser">
              <td>{{ event.event_date_txt }}</td>
              <td>{{ event.event_type }}</td>
            </tr>
          </tbody>
        </table>
      </mat-tab>
    </mat-tab-group>
  </div>
</ng-template>

<div class="modal-body" id="profile">
  <table class="table">
    <tbody>
      <h4>{{ element.first_name }} {{ element.last_name }}</h4>
      <button mat-menu-item (click)="open(content)" id="historyBtn">
        <mat-icon>history</mat-icon>
        <span>View Events</span>
      </button>
      <tr>
        <td id="colored">
          <!-- spacing here is important, do not remove for the time being -->
          <mat-icon>account_box</mat-icon>
          <pre>User ID:         {{ indentRight(userId, "User ID") }}</pre>
        </td>
      </tr>
      <tr>
        <td>
          <mat-icon>email</mat-icon>
          <pre>Email:           {{ indentRight(element.email, "Email") }}</pre>
        </td>
      </tr>
      <tr>
        <td id="colored">
          <mat-icon>home</mat-icon>
          <pre>
Address:        {{ indentRight(element.address_number, "Address") }} {{
              element.address_street
            }}, {{ element.address_city }}, {{ element.address_postal_code }}</pre
          >
        </td>
      </tr>
      <tr>
        <td>
          <mat-icon>cake</mat-icon>
          <pre>
 Date of Birth:     {{
              indentRight(formatDate(element.dob), "Date of birth")
            }}</pre
          >
        </td>
      </tr>
      <tr>
        <td id="colored">
          <mat-icon>phone_android</mat-icon>
          <pre>
Phone Number:{{
              indentRight(prettifyNumber(element.phone_number), "phone number")
            }}</pre
          >
        </td>
      </tr>
      <tr>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5>Cancellations: {{ valid(element.cancellations) }}</h5>

  <table class="table" *ngIf="currentEventsUser.length != 0">
          <thead class="thead-dark">
            <tr>
              <th scope="col">Event</th>
              <th scope="col">Reason of Cancellation</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let event of cancelledEventsUser">
              <td>{{ event.event_id }}</td>
              <td>{{ event.reason }}</td>
            </tr>
          </tbody>
        </table>
</div>

<!-- <button mat-menu-item (click)="open(content)" id="historyBtn">
  <mat-icon>history</mat-icon>
  <span>View Events</span>
</button> -->
